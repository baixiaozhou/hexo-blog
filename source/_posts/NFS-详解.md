---
title: NFS 详解
author: baixiaozhou
categories:
  - 分布式存储
tags:
  - NFS
  - 存储
description: NFS 简介
date: 2024-10-09 10:51:43
references:
cover:
banner:
---

# 概述

NFS 全拼 Network File System， 由 Sun Microsystems 于 1984 年开发，旨在允许不同机器间通过网络共享文件。它是一个基于客户端-服务器架构的分布式文件系统协议，允许多个客户端系统像访问本地存储一样访问远程服务器上的文件。

NFS 使得用户可以通过网络访问远程计算机上的文件，并对文件进行读取、写入、删除等操作，这些操作像本地文件系统一样透明，用户无需关心文件实际存储的位置。

# 相关概念

NFS 关键概念

1. 服务器和客户端：
	- 服务器：存储文件并将文件系统通过网络共享给客户端。
	- 客户端：通过网络挂载服务器提供的文件系统，并进行文件操作。
2.	挂载（Mounting）：
	- 客户端使用 NFS 挂载（mount）服务器上共享的文件系统。挂载后，远程文件系统可以像本地文件系统一样进行访问。
3.	RPC（Remote Procedure Call）：
	- NFS 基于 RPC（远程过程调用）协议进行通信。通过 RPC，客户端发送请求，服务器响应请求并返回相应的数据。
4.	文件句柄：
	- NFS 使用文件句柄来唯一标识远程文件。客户端在访问文件时，文件句柄将传递给服务器以确定目标文件。
5.	Stateless（无状态）协议：
	- 早期版本的 NFS 是无状态的，这意味着服务器不保存任何有关客户端的信息。每个请求都独立处理，且服务器不跟踪会话状态。
	- 无状态的设计提高了系统的容错性，但也限制了某些功能。现代的 NFS 引入了一些状态管理来增强功能。
6.	版本：
	- NFS 经过多次版本迭代，最常用的版本有 NFSv3 和 NFSv4。
	- NFSv3：最广泛使用的版本，支持较大的文件系统，并增加了多种优化。
	- NFSv4：引入了状态管理、增强的安全性以及简化了防火墙穿越。
7.	文件锁定：
	- NFS 支持文件锁定机制，使得客户端可以在多人同时操作同一文件时避免冲突。NFSv4 将锁定功能内置，而 NFSv3 需要外部锁定协议（如 NLM）。
8.	安全性：
	- 传统的 NFS 依赖于基于 IP 地址的信任机制。现代的 NFSv4 支持通过 Kerberos 进行强身份认证。
9.	性能和缓存：
	- 为了减少网络通信带来的延迟，NFS 客户端通常使用缓存机制。客户端可以缓存文件的部分内容和属性，并在适当的时候将缓存的数据写回服务器。

# 部署安装

